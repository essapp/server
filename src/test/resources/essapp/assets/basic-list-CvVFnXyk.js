import{_ as ue}from"./index.vue_vue_type_script_setup_true_lang-BWFQ7fUJ.js";import{d as L,f as _,c as g,o as N,u as r,a2 as m,a3 as M,a4 as s,ag as B,F as R,aj as j,ae as E,S as ie,r as ce,a9 as T,aa as n,k as a,H as U,G as b,ad as S,B as _e}from"./vue-1GTWcegU.js";import{b9 as z,ba as de,d as pe,ah as me,aa as fe,ag as ve,ax as ge,ay as xe,bb as we,c as ke,a8 as ye,bc as he,e as be,M as Ce,D as $e,y as Se,J as Me,a2 as He,a3 as De,bd as Ye,v as Ie,w as Oe,an as Ve,X as Be}from"./antd-CGu55NZb.js";import{x as Te,_ as Ue}from"./index-C5Ppdpc0.js";import"./context-srHhasJW.js";async function ze(C){return Te("/list/basic-list",C)}const qe={key:0,class:"list-container"},Ae=L({__name:"index",props:{dataSource:{},itemHeight:{default:80}},setup(C){const d=C,f=_(),x=g(()=>`transform: translateY(${f.value}px)`),w=_(),i=g(()=>w.value?w.value.offsetHeight:0),H=g(()=>Math.ceil(i.value/d.itemHeight)+1),v=_(0),D=g(()=>v.value+H.value),t=_(),p=g(()=>{var u,c;if((u=t.value)!=null&&u.length)return d.itemHeight*((c=t.value)==null?void 0:c.length)}),k=g(()=>{var o;const u=Math.max(0,v.value),c=Math.min(D.value,t.value.length);return(o=t.value)==null?void 0:o.slice(u,c)});function y(){if(d.dataSource)t.value=d.dataSource;else{const u=Array.from({length:1e4});u.forEach((c,o)=>{u[o]=o}),t.value=u}}function Y(u){const c=u.target.scrollTop;v.value=Math.floor(c/d.itemHeight),f.value=v.value*d.itemHeight}return N(()=>{y()}),(u,c)=>r(t)?(m(),M("div",qe,[s("div",{ref_key:"scrollerContainerRef",ref:w,class:"scroller-container scrollbar",onScroll:Y},[s("div",{class:"pillar",style:B({height:`${r(p)}px`})},null,4),s("div",{class:"list",style:B(r(x))},[(m(!0),M(R,null,j(r(k),(o,e)=>(m(),M("div",{key:e,class:"item",style:B({height:`${u.itemHeight}px`})},[ie(u.$slots,"renderItem",{item:o},void 0,!0)],4))),128))],4)],544)])):E("",!0)}}),Le=Ue(Ae,[["__scopeId","data-v-bcbb697e"]]),Ne={class:"flex flex-col items-center justify-center"},Re={class:"text-zinc-400"},je={style:{"font-size":"24px"}},Ee={class:"ml-5"},Fe={href:"https://www.antdv.com/"},Ge={class:"flex text-gray-400"},Je={class:"px-10"},Pe={class:"w-45 flex items-center"},Qe={class:"a-extra"},Xe=["onClick"],Ke=["onClick"],at=L({__name:"basic-list",setup(C){const d=_([{title:"我的待办",content:"8个任务"},{title:"本周任务平均处理时间",content:"32分钟"},{title:"本周完成任务数",content:"24个任务"}]),f=_("a"),x=_();function w(o){console.log("use value",o)}const i=_([]),H=_({pageSize:5,pageSizeOptions:["10","20","30","40","50"],showQuickJumper:!0,total:0});async function v(){var e;const o=await ze();i.value=o.data??[],H.value.total=((e=o.data)==null?void 0:e.length)??0,console.log(i.value)}function D(o){z.confirm({title:"删除任务",icon:a(de),content:a("div",{},"确定要删除该任务吗?"),cancelText:"取消",okText:"确认",onOk(){i.value.splice(o,1)},class:"test"})}const t=ce({title:"",start:"",owner:"清风不问烟雨",description:"",index:0}),p=_(!1),k=_(!1);function y(o,e){e?(k.value=!0,p.value=!0):(k.value=!1,p.value=!0,t.title=o.title,t.description=o.content,t.start=pe(o.start),t.index=i.value.indexOf(o))}function Y(){let o=2;const e=z.success({title:"操作成功",content:`本窗口将在${o}后自动关闭`}),h=setInterval(()=>{o-=1,e.update({content:`本窗口将在${o}后自动关闭`})},1e3);setTimeout(()=>{clearInterval(h),e.destroy()},o*1e3)}function u(){for(const e in t)if(e!=="index"&&!t[e])return;const o=t.index;if(k.value){const e={title:t.title,content:t.description,start:t.start.format("YYYY-MM-DD HH:mm")};i.value.splice(0,0,e)}else for(const e in t)e==="start"?i.value[o][e]=t.start.format("YYYY-MM-DD HH:mm"):i.value[o][e]=t[e];p.value=!1,c(),Y()}function c(){console.log("cancel"),t.description="",t.owner="清风不问烟雨",t.start="",t.title=""}return N(()=>{v()}),(o,e)=>{const h=me,q=fe,I=ve,O=ge,F=xe,G=we,J=ke,P=ye,Q=he,A=be,X=Ce,K=$e,W=Se,Z=Me,ee=He,$=De,te=Ye,ne=Ie,ae=Oe,oe=Ve,le=Be,se=z,re=ue;return m(),T(re,null,{default:n(()=>[a(I,null,{default:n(()=>[a(q,{gutter:16},{default:n(()=>[(m(!0),M(R,null,j(r(d),(l,V)=>(m(),T(h,{key:V,xs:24,sm:8},{default:n(()=>[s("div",Ne,[s("div",Re,S(l.title),1),s("div",je,S(l.content),1)])]),_:2},1024))),128))]),_:1})]),_:1}),a(I,{class:"mt-5"},{title:n(()=>[a(I,{bordered:!1},{default:n(()=>[a(q,{style:{"font-weight":"normal"}},{default:n(()=>[a(h,{span:14},{default:n(()=>e[9]||(e[9]=[s("span",null,"基本列表",-1)])),_:1}),a(h,{span:10,class:"flex"},{default:n(()=>[s("div",null,[a(F,{value:r(f),"onUpdate:value":e[0]||(e[0]=l=>U(f)?f.value=l:null)},{default:n(()=>[a(O,{value:"a"},{default:n(()=>e[10]||(e[10]=[b(" 全部 ")])),_:1}),a(O,{value:"b"},{default:n(()=>e[11]||(e[11]=[b(" 进行中 ")])),_:1}),a(O,{value:"c"},{default:n(()=>e[12]||(e[12]=[b(" 等待中 ")])),_:1})]),_:1},8,["value"])]),s("div",Ee,[a(G,{value:r(x),"onUpdate:value":e[1]||(e[1]=l=>U(x)?x.value=l:null),placeholder:"请输入",style:{width:"270px"},onSearch:w},null,8,["value"])])]),_:1})]),_:1})]),_:1})]),default:n(()=>[r(i).length!==0?(m(),T(Le,{key:0,"data-source":r(i)},{renderItem:n(({item:l})=>[a(W,null,{actions:n(()=>[s("div",Ge,[e[14]||(e[14]=s("div",{class:"flex flex-col items-center"},[s("div",null,"Owner"),s("div",null,"清风不问烟雨")],-1)),s("div",Je,[e[13]||(e[13]=s("div",null,"开始时间",-1)),s("div",null,S(l.start),1)]),s("div",Pe,[a(Q,{percent:l.percent,status:l.status},null,8,["percent","status"])])])]),extra:n(()=>[s("div",Qe,[s("a",{key:"list-loadmore-edit",class:"m-4",onClick:V=>y(l)}," 编辑 ",8,Xe),a(K,null,{overlay:n(()=>[a(X,null,{default:n(()=>[a(A,null,{default:n(()=>[s("a",{onClick:y},"编辑")]),_:1}),a(A,null,{default:n(()=>[s("a",{onClick:V=>D(l.index)},"删除",8,Ke)]),_:2},1024)]),_:2},1024)]),default:n(()=>[s("a",{class:"ant-dropdown-link",onClick:e[2]||(e[2]=_e(()=>{},["prevent"]))}," 更多 ")]),_:2},1024)])]),default:n(()=>[a(P,{description:l.content},{title:n(()=>[s("a",Fe,S(l.title),1)]),avatar:n(()=>[a(J,{src:l.link},null,8,["src"])]),_:2},1032,["description"])]),_:2},1024)]),_:1},8,["data-source"])):E("",!0)]),_:1}),a(Z,{type:"dashed",onClick:e[3]||(e[3]=l=>y(null,!0))},{default:n(()=>e[15]||(e[15]=[b(" + 添加 ")])),_:1}),a(se,{open:r(p),"onUpdate:open":e[8]||(e[8]=l=>U(p)?p.value=l:null),title:"任务编辑",onOk:u,onCancel:c},{default:n(()=>[a(le,{model:r(t),name:"basic","label-col":{span:24},"wrapper-col":{span:24},autocomplete:"off"},{default:n(()=>[a($,{label:"任务名称",name:"title",rules:[{required:!0,message:"请输入任务名称"}]},{default:n(()=>[a(ee,{value:r(t).title,"onUpdate:value":e[4]||(e[4]=l=>r(t).title=l)},null,8,["value"])]),_:1}),a($,{label:"开始时间",name:"start",rules:[{required:!0,message:"请选择开始时间"}]},{default:n(()=>[a(te,{value:r(t).start,"onUpdate:value":e[5]||(e[5]=l=>r(t).start=l),class:"w-1/1","show-time":""},null,8,["value"])]),_:1}),a($,{label:"任务负责人",name:"owner",rules:[{required:!0,message:"请输入任务负责人"}]},{default:n(()=>[a(ae,{value:r(t).owner,"onUpdate:value":e[6]||(e[6]=l=>r(t).owner=l),placeholder:"please select your zone"},{default:n(()=>[a(ne,{value:"owner"},{default:n(()=>e[16]||(e[16]=[b(" 清风不问烟雨 ")])),_:1})]),_:1},8,["value"])]),_:1}),a($,{label:"产品描述",name:"description",rules:[{required:!0,message:"请输入产品描述"}]},{default:n(()=>[a(oe,{value:r(t).description,"onUpdate:value":e[7]||(e[7]=l=>r(t).description=l),placeholder:"Basic usage",rows:3},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])]),_:1})}}});export{at as default};
